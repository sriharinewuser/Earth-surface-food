{"ast":null,"code":"import React,{createContext,useContext,useEffect,useState}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";const CartContext=/*#__PURE__*/createContext(null);const CART_KEY='cart';const EMPTY_CART={items:[],totalPrice:0,totalCount:0};export default function CartProvider(_ref){let{children}=_ref;const initCart=getCartFromLocalStorage();const[cartItems,setCartItems]=useState(initCart.items);const[totalPrice,setTotalPrice]=useState(initCart.totalPrice);const[totalCount,setTotalCount]=useState(initCart.totalCount);useEffect(()=>{const totalPrice=sum(cartItems.map(item=>item.price));const totalCount=sum(cartItems.map(item=>item.quantity));setTotalPrice(totalPrice);setTotalCount(totalCount);localStorage.setItem(CART_KEY,JSON.stringify({items:cartItems,totalPrice,totalCount}));},[cartItems]);function getCartFromLocalStorage(){const storedCart=localStorage.getItem(CART_KEY);return storedCart?JSON.parse(storedCart):EMPTY_CART;}const sum=items=>{return items.reduce((prevValue,curValue)=>prevValue+curValue,0);};const removeFromCart=foodId=>{const filteredCartItems=cartItems.filter(item=>item.food.id!==foodId);setCartItems(filteredCartItems);};const changeQuantity=(cartItem,newQauntity)=>{const{food}=cartItem;const changedCartItem={...cartItem,quantity:newQauntity,price:food.price*newQauntity};setCartItems(cartItems.map(item=>item.food.id===food.id?changedCartItem:item));};const addToCart=food=>{const cartItem=cartItems.find(item=>item.food.id===food.id);if(cartItem){changeQuantity(cartItem,cartItem.quantity+1);}else{setCartItems([...cartItems,{food,quantity:1,price:food.price}]);}};const clearCart=()=>{localStorage.removeItem(CART_KEY);const{items,totalPrice,totalCount}=EMPTY_CART;setCartItems(items);setTotalPrice(totalPrice);setTotalCount(totalCount);};return/*#__PURE__*/_jsx(CartContext.Provider,{value:{cart:{items:cartItems,totalPrice,totalCount},removeFromCart,changeQuantity,addToCart,clearCart},children:children});}export const useCart=()=>useContext(CartContext);","map":{"version":3,"names":["React","createContext","useContext","useEffect","useState","jsx","_jsx","CartContext","CART_KEY","EMPTY_CART","items","totalPrice","totalCount","CartProvider","_ref","children","initCart","getCartFromLocalStorage","cartItems","setCartItems","setTotalPrice","setTotalCount","sum","map","item","price","quantity","localStorage","setItem","JSON","stringify","storedCart","getItem","parse","reduce","prevValue","curValue","removeFromCart","foodId","filteredCartItems","filter","food","id","changeQuantity","cartItem","newQauntity","changedCartItem","addToCart","find","clearCart","removeItem","Provider","value","cart","useCart"],"sources":["/home/rajesh/Desktop/srihari new user/Earth-surface-food/frontend/src/hooks/useCart.js"],"sourcesContent":["import React, { createContext, useContext, useEffect, useState } from 'react';\n\nconst CartContext = createContext(null);\nconst CART_KEY = 'cart';\nconst EMPTY_CART = {\n  items: [],\n  totalPrice: 0,\n  totalCount: 0,\n};\n\nexport default function CartProvider({ children }) {\n  const initCart = getCartFromLocalStorage();\n  const [cartItems, setCartItems] = useState(initCart.items);\n  const [totalPrice, setTotalPrice] = useState(initCart.totalPrice);\n  const [totalCount, setTotalCount] = useState(initCart.totalCount);\n\n  useEffect(() => {\n    const totalPrice = sum(cartItems.map(item => item.price));\n    const totalCount = sum(cartItems.map(item => item.quantity));\n    setTotalPrice(totalPrice);\n    setTotalCount(totalCount);\n\n    localStorage.setItem(\n      CART_KEY,\n      JSON.stringify({\n        items: cartItems,\n        totalPrice,\n        totalCount,\n      })\n    );\n  }, [cartItems]);\n\n  function getCartFromLocalStorage() {\n    const storedCart = localStorage.getItem(CART_KEY);\n    return storedCart ? JSON.parse(storedCart) : EMPTY_CART;\n  }\n\n  const sum = items => {\n    return items.reduce((prevValue, curValue) => prevValue + curValue, 0);\n  };\n\n  const removeFromCart = foodId => {\n    const filteredCartItems = cartItems.filter(item => item.food.id !== foodId);\n    setCartItems(filteredCartItems);\n  };\n\n  const changeQuantity = (cartItem, newQauntity) => {\n    const { food } = cartItem;\n\n    const changedCartItem = {\n      ...cartItem,\n      quantity: newQauntity,\n      price: food.price * newQauntity,\n    };\n\n    setCartItems(\n      cartItems.map(item => (item.food.id === food.id ? changedCartItem : item))\n    );\n  };\n\n  const addToCart = food => {\n    const cartItem = cartItems.find(item => item.food.id === food.id);\n    if (cartItem) {\n      changeQuantity(cartItem, cartItem.quantity + 1);\n    } else {\n      setCartItems([...cartItems, { food, quantity: 1, price: food.price }]);\n    }\n  };\n\n  const clearCart = () => {\n    localStorage.removeItem(CART_KEY);\n    const { items, totalPrice, totalCount } = EMPTY_CART;\n    setCartItems(items);\n    setTotalPrice(totalPrice);\n    setTotalCount(totalCount);\n  };\n\n  return (\n    <CartContext.Provider\n      value={{\n        cart: { items: cartItems, totalPrice, totalCount },\n        removeFromCart,\n        changeQuantity,\n        addToCart,\n        clearCart,\n      }}\n    >\n      {children}\n    </CartContext.Provider>\n  );\n}\n\nexport const useCart = () => useContext(CartContext);\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
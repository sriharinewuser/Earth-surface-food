{"ast":null,"code":"import React,{useState,useEffect}from'react';import classes from'./map.module.css';import'leaflet/dist/leaflet.css';import{MapContainer,TileLayer,Marker,Popup,useMapEvents}from'react-leaflet';import{toast}from'react-toastify';import*as L from'leaflet';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export default function Map(_ref){let{readonly,location,onChange}=_ref;return/*#__PURE__*/_jsx(\"div\",{className:classes.container,children:/*#__PURE__*/_jsxs(MapContainer,{className:classes.map,center:[0,0],zoom:1,dragging:!readonly,touchZoom:!readonly,doubleClickZoom:!readonly,scrollWheelZoom:!readonly,boxZoom:!readonly,keyboard:!readonly,attributionControl:false,children:[/*#__PURE__*/_jsx(TileLayer,{url:\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"}),/*#__PURE__*/_jsx(FindButtonAndMarker,{readonly:readonly,location:location,onChange:onChange})]})});}function FindButtonAndMarker(_ref2){let{readonly,location,onChange}=_ref2;const[position,setPosition]=useState(location);useEffect(()=>{if(readonly){map.setView(position,13);return;}if(position)onChange(position);},[position]);const map=useMapEvents({click(e){!readonly&&setPosition(e.latlng);},locationfound(e){setPosition(e.latlng);map.flyTo(e.latlng,13);},locationerror(e){toast.error(e.message);}});const markerIcon=new L.Icon({iconUrl:'/marker-icon-2x.png',iconSize:[25,41],iconAnchor:[12.5,41],popupAnchor:[0,-41]});return/*#__PURE__*/_jsxs(_Fragment,{children:[!readonly&&/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:classes.find_location,onClick:()=>map.locate(),children:\"Find My Location\"}),position&&/*#__PURE__*/_jsx(Marker,{eventHandlers:{dragend:e=>{setPosition(e.target.getLatLng());}},position:position,draggable:!readonly,icon:markerIcon,children:/*#__PURE__*/_jsx(Popup,{children:\"Shipping Location\"})})]});}","map":{"version":3,"names":["React","useState","useEffect","classes","MapContainer","TileLayer","Marker","Popup","useMapEvents","toast","L","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Map","_ref","readonly","location","onChange","className","container","children","map","center","zoom","dragging","touchZoom","doubleClickZoom","scrollWheelZoom","boxZoom","keyboard","attributionControl","url","FindButtonAndMarker","_ref2","position","setPosition","setView","click","e","latlng","locationfound","flyTo","locationerror","error","message","markerIcon","Icon","iconUrl","iconSize","iconAnchor","popupAnchor","type","find_location","onClick","locate","eventHandlers","dragend","target","getLatLng","draggable","icon"],"sources":["/home/rajesh/Desktop/srihari new user/Earth-surface-food/frontend/src/components/Map/Map.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport classes from './map.module.css';\nimport 'leaflet/dist/leaflet.css';\nimport {\n  MapContainer,\n  TileLayer,\n  Marker,\n  Popup,\n  useMapEvents,\n} from 'react-leaflet';\nimport { toast } from 'react-toastify';\nimport * as L from 'leaflet';\n\nexport default function Map({ readonly, location, onChange }) {\n  return (\n    <div className={classes.container}>\n      <MapContainer\n        className={classes.map}\n        center={[0, 0]}\n        zoom={1}\n        dragging={!readonly}\n        touchZoom={!readonly}\n        doubleClickZoom={!readonly}\n        scrollWheelZoom={!readonly}\n        boxZoom={!readonly}\n        keyboard={!readonly}\n        attributionControl={false}\n      >\n        <TileLayer url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\" />\n        <FindButtonAndMarker\n          readonly={readonly}\n          location={location}\n          onChange={onChange}\n        />\n      </MapContainer>\n    </div>\n  );\n}\n\nfunction FindButtonAndMarker({ readonly, location, onChange }) {\n  const [position, setPosition] = useState(location);\n\n  useEffect(() => {\n    if (readonly) {\n      map.setView(position, 13);\n      return;\n    }\n    if (position) onChange(position);\n  }, [position]);\n\n  const map = useMapEvents({\n    click(e) {\n      !readonly && setPosition(e.latlng);\n    },\n    locationfound(e) {\n      setPosition(e.latlng);\n      map.flyTo(e.latlng, 13);\n    },\n    locationerror(e) {\n      toast.error(e.message);\n    },\n  });\n\n  const markerIcon = new L.Icon({\n    iconUrl: '/marker-icon-2x.png',\n    iconSize: [25, 41],\n    iconAnchor: [12.5, 41],\n    popupAnchor: [0, -41],\n  });\n\n  return (\n    <>\n      {!readonly && (\n        <button\n          type=\"button\"\n          className={classes.find_location}\n          onClick={() => map.locate()}\n        >\n          Find My Location\n        </button>\n      )}\n\n      {position && (\n        <Marker\n          eventHandlers={{\n            dragend: e => {\n              setPosition(e.target.getLatLng());\n            },\n          }}\n          position={position}\n          draggable={!readonly}\n          icon={markerIcon}\n        >\n          <Popup>Shipping Location</Popup>\n        </Marker>\n      )}\n    </>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}